<div class="tab-content">
  <div id="tab-1" class="tab-pane fade show p-0 active">

    <!-- Loading Spinner -->
    <div *ngIf="isLoading" class="text-center p-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">جاري التحميل...</span>
      </div>
    </div>

    <!-- Products Grid -->
    <div *ngIf="!isLoading && products.length > 0" class="row g-4">

      <div *ngFor="let pro of products" class="col-lg-6">
        <div class="d-flex align-items-center">
          <img
            class="flex-shrink-0 img-fluid rounded"
            [src]="pro.imagePath
       ? '/assets/img/' + pro.imagePath
       : '/assets/img/sweets/basbousa.jpg'"
            [alt]="pro.name"
            style="width: 80px; height: 80px; object-fit: cover;"
            (error)="onImageError($event)"
          >

          <div class="w-100 d-flex flex-column text-start ps-4">
            <h5 class="d-flex justify-content-between border-bottom pb-2">
              <span>{{pro.name}}</span>
              <span class="text-primary">${{pro.price | number:'1.2-2'}}</span>
            </h5>
            <small class="fst-italic">{{pro.description}}</small>
            <button
              type="button"
              class="btn btn-danger col-lg-6 mt-2"
              (click)="addToCart(pro)"
            >
              إضافة للسلة
            </button>
          </div>
        </div>
      </div>
            <!-- Pagination Section -->
      <div class="col-12 d-flex justify-content-center align-items-center flex-wrap gap-3 mt-4">
        <ngb-pagination
          [(page)]="page"
          [pageSize]="pageSize"
          [collectionSize]="collectionSize"
          (pageChange)="doPagination()"
          [maxSize]="5"
          [boundaryLinks]="true"
        >
        </ngb-pagination>

        <div class="d-flex align-items-center gap-2">
          <label for="pageSize" class="mb-0">حجم الصفحة:</label>
          <select
            id="pageSize"
            class="form-select form-select-sm"
            style="width: auto;"
            [value]="pageSize"
            (change)="changePageSize($event)"
          >
            <option [value]="2">2</option>
            <option [value]="5">5</option>
            <option [value]="10">10</option>
            <option [value]="20">20</option>
            <option [value]="50">50</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Error Messages -->
    <div *ngIf="!isLoading && messageAr && messageEn" class="card border-danger mt-4">
      <div class="card-body">
        <div class="alert alert-danger mb-3" dir="rtl">
          <i class="bi bi-exclamation-triangle-fill me-2"></i>
          {{messageAr}}
        </div>
        <div class="alert alert-danger mb-0" dir="ltr">
          <i class="bi bi-exclamation-triangle-fill me-2"></i>
          {{messageEn}}
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && products.length === 0 && !messageAr" class="text-center p-5">
      <i class="bi bi-inbox" style="font-size: 3rem; color: #ccc;"></i>
      <h5 class="mt-3 text-muted">لا توجد منتجات</h5>
    </div>

  </div>
</div>
